{"version":3,"sources":["../../js/main.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function getRequest(searchTerm, max=3, orderby='date', _pageToken='') {\n  let params = {\n    part: 'snippet',\n    key: 'AIzaSyB9evlzwtgDeMvhbSA-zVYUBQf_K1jcWfc',\n    q: searchTerm + ' recipe',\n    type: 'video',\n    maxResults: max,\n    order: orderby,\n    regionCode: 'US',\n    fields: 'nextPageToken,prevPageToken,' +\n            'items(id(videoId)),' +\n            'items(snippet(title,thumbnails(high)))',\n    pageToken: _pageToken\n  }\n  let url = \"https://www.googleapis.com/youtube/v3/search\"\n  return [url, params]\n}\n\nlet thumbRecent = function(value, index) {\n  return {index: index, thumb: `\n          <div class=\"col s12 m6 l4\">\n            <div class=\"card\">\n              <div class=\"card-image\">\n                <a href=\"https://www.youtube.com/watch?v=${value.id.videoId}\" target=\"_blank\">\n                  <img src=\"${value.snippet.thumbnails.high.url}\" alt=\"recent video ${index++}\" class=\"responsive-img\">\n                  <span class=\"card-title\">${value.snippet.title.toLowerCase()}</span>\n                </a>\n              </div>\n            </div>\n          </div>\n        `}\n}\n\nlet thumbResult = function(value, index) {\n  const yt = 'https://www.youtube.com/'\n  const vId = value.id.videoId\n  return {index: index, thumb: `\n          <a href=\"${yt}watch?v=${vId}\" class=\"recipe-video\" data-video=\"${yt}embed/${vId}?autoplay=1\">\n            <img src=\"${value.snippet.thumbnails.high.url}\" alt=\"recent video ${index++}\">\n            <p>${value.snippet.title.truncateString(35).toLowerCase()}</p>\n          </a>\n        `}\n}\n\nfunction displayResults(url, params, el, thumbType) {\n  $.get(url, params, function (data) {\n    var $element = $(el)\n    $element.html('')\n    $('.btn-more').attr('next', data.nextPageToken)\n\n    let index = 1\n    for (let value of data.items) {\n      let __ret = thumbType(value, index)\n      index = __ret.index\n      let thumb = __ret.thumb\n      $element.append(thumb)\n    }\n  }, 'json')\n}\n\nlet getSearchTerm = () => {\n  return $('[name=recipe]').val()\n}\n\nlet popUpYT = function (e) {\n  e.preventDefault()\n  let embed = $(this).attr('data-video')\n  window.open(embed, '_blank', 'height=400,width=600,top=300,left=300')\n}\n\nlet showNextYT = function () {\n  displayResults(...getRequest(getSearchTerm(), undefined, undefined,\n    $('.btn-more').attr('next')), '.results.videos', thumbResult)\n}\n\n$(function () {\n  displayResults(...getRequest(''), '.recents.videos', thumbRecent)\n\n  $('#recipe-search').on('submit', (e) => {\n    e.preventDefault()\n    displayResults(...getRequest(getSearchTerm()), '.results.videos', thumbResult)\n  })\n\n  $('.results.videos').on('click', '.recipe-video', popUpYT)\n\n  $('.btn-more').on('click', function() {\n    showNextYT()\n  })\n})\n\nString.prototype.truncateString = function (max, add='...') {\n  return (this.length > max ? this.substring(0, max) + add : this)\n}\n"]}